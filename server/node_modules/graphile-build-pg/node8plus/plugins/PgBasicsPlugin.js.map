{"version":3,"sources":["../../src/plugins/PgBasicsPlugin.js"],"names":["preventEmptyResult","sql","defaultPgColumnFilter","_attr","_build","_context","identity","_","obj","Object","keys","reduce","memo","key","fn","args","result","apply","length","stringifiedArgs","require","inspect","Error","String","omitWithRBACChecks","omit","entity","permission","ORDINARY_TABLE","VIEW","MATERIALIZED_VIEW","isTableLike","kind","classKind","EXECUTE","aclExecutable","tableEntity","READ","ALL","MANY","aclSelectable","attributes","some","attr","CREATE","aclInsertable","UPDATE","aclUpdatable","DELETE","aclDeletable","class","attributeEntity","klass","FILTER","ORDER","omitUnindexed","isIndexed","type","_omitUnindexedReadWarningGiven","console","log","describePgEntity","namespaceName","name","keyAttributes","map","a","join","includeAlias","getAlias","tags","value","endsWith","chalk","bold","t","c","f","p","r","v","m","e","error","id","sqlCommentByAddingTags","tagsToAdd","escape","str","replace","chr","assign","description","tagsSql","tag","tagValue","valueArray","Array","isArray","highlightOrNot","green","forEach","push","commentValue","sqlThing","identifier","PgBasicsPlugin","builder","pgStrictFunctions","pgColumnFilter","pgIgnoreRBAC","pgIgnoreIndexes","pgLegacyJsonUuid","pgOmit","baseOmit","hook","build","versions","version","extend","graphileBuildPgVersion","pgSql","pgQueryFromResolveData","pgAddStartEndCursor","addStartEndCursor","pgMakeProcField","makeProcField","pgParseIdentifier","parseIdentifier","pgViaTemporaryTable","viaTemporaryTable","pgField","inflection","oldBuiltin","builtin","call","conditionType","typeName","upperCamelCase","inputType","rangeBoundType","rangeType","patchType","baseInputType","patchField","itemName","camelCase","orderByType","pluralize","edge","connection","_functionName","proc","_typeName","_tableName","table","_singularizedTableName","singularize","_columnName","_options","enumType","argument","index","orderByEnum","columnName","ascending","constantCase","orderByColumnEnum","skipRowId","orderByComputedColumnEnum","pseudoColumnName","computedColumn","domainType","enumName","inValue","$","tableNode","tableFieldName","allRows","allRowsSimple","functionMutationName","functionMutationResultFieldName","gqlType","plural","outputArgNames","resultFieldName","returnTypeId","functionQueryName","functionQueryNameList","functionPayloadType","functionInputType","functionOutputFieldName","outputArgName","tableType","column","_table","fieldName","computedColumnList","singleRelationByKeys","detailedKeys","_foreignTable","constraint","singleRelationByKeysBackwards","foreignSingleFieldName","foreignFieldName","manyRelationByKeys","manyRelationByKeysSimple","foreignSimpleFieldName","rowByUniqueKeys","updateByKeys","updateFieldName","deleteByKeys","deleteFieldName","updateByKeysInputType","deleteByKeysInputType","updateNode","deleteNode","deletedNodeId","updateNodeInputType","deleteNodeInputType","edgeField","recordFunctionReturnType","resultTypeName","recordFunctionConnection","recordFunctionEdge","scalarFunctionConnection","scalarFunctionEdge","createField","createInputType","createPayloadType","updatePayloadType","deletePayloadType"],"mappings":"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","file":"PgBasicsPlugin.js","sourcesContent":["// @flow\nimport * as sql from \"pg-sql2\";\nimport type { Plugin } from \"graphile-build\";\nimport { version } from \"../../package.json\";\nimport type {\n  PgProc,\n  PgType,\n  PgClass,\n  PgAttribute,\n  PgConstraint,\n  PgEntity,\n} from \"./PgIntrospectionPlugin\";\nimport pgField from \"./pgField\";\n\nimport queryFromResolveDataFactory from \"../queryFromResolveDataFactory\";\nimport addStartEndCursor from \"./addStartEndCursor\";\nimport baseOmit, {\n  CREATE,\n  READ,\n  UPDATE,\n  DELETE,\n  ALL,\n  MANY,\n  ORDER,\n  FILTER,\n  EXECUTE,\n} from \"../omit\";\nimport makeProcField from \"./makeProcField\";\nimport parseIdentifier from \"../parseIdentifier\";\nimport viaTemporaryTable from \"./viaTemporaryTable\";\nimport chalk from \"chalk\";\nimport pickBy from \"lodash/pickBy\";\n\nconst defaultPgColumnFilter = (_attr, _build, _context) => true;\ntype Keys = Array<{\n  column: string,\n  table: string,\n  schema: ?string,\n}>;\n\nconst identity = _ => _;\n\nexport function preventEmptyResult<\n  // eslint-disable-next-line flowtype/no-weak-types\n  O: { [key: string]: (...args: Array<any>) => string }\n>(obj: O): $ObjMap<O, <V>(V) => V> {\n  return Object.keys(obj).reduce((memo, key) => {\n    const fn = obj[key];\n    memo[key] = function(...args) {\n      const result = fn.apply(this, args);\n      if (typeof result !== \"string\" || result.length === 0) {\n        const stringifiedArgs = require(\"util\").inspect(args);\n        throw new Error(\n          `Inflector for '${key}' returned '${String(\n            result\n          )}'; expected non-empty string\\n` +\n            `See: https://github.com/graphile/graphile-build/blob/master/packages/graphile-build-pg/src/plugins/PgBasicsPlugin.js\\n` +\n            `Arguments passed to ${key}:\\n${stringifiedArgs}`\n        );\n      }\n      return result;\n    };\n    return memo;\n  }, {});\n}\n\nconst omitWithRBACChecks = omit => (\n  entity: PgProc | PgClass | PgAttribute | PgConstraint,\n  permission: string\n) => {\n  const ORDINARY_TABLE = \"r\";\n  const VIEW = \"v\";\n  const MATERIALIZED_VIEW = \"m\";\n  const isTableLike = entity =>\n    entity &&\n    entity.kind === \"class\" &&\n    (entity.classKind === ORDINARY_TABLE ||\n      entity.classKind === VIEW ||\n      entity.classKind === MATERIALIZED_VIEW);\n  if (entity.kind === \"procedure\") {\n    if (permission === EXECUTE && !entity.aclExecutable) {\n      return true;\n    }\n  } else if (entity.kind === \"class\" && isTableLike(entity)) {\n    const tableEntity: PgClass = entity;\n    if (\n      (permission === READ || permission === ALL || permission === MANY) &&\n      (!tableEntity.aclSelectable &&\n        !tableEntity.attributes.some(attr => attr.aclSelectable))\n    ) {\n      return true;\n    } else if (\n      permission === CREATE &&\n      (!tableEntity.aclInsertable &&\n        !tableEntity.attributes.some(attr => attr.aclInsertable))\n    ) {\n      return true;\n    } else if (\n      permission === UPDATE &&\n      (!tableEntity.aclUpdatable &&\n        !tableEntity.attributes.some(attr => attr.aclUpdatable))\n    ) {\n      return true;\n    } else if (permission === DELETE && !tableEntity.aclDeletable) {\n      return true;\n    }\n  } else if (entity.kind === \"attribute\" && isTableLike(entity.class)) {\n    const attributeEntity: PgAttribute = entity;\n\n    const klass = attributeEntity.class;\n    // Have we got *any* permissions on the table?\n    if (\n      klass.aclSelectable ||\n      klass.attributes.some(attr => attr.aclSelectable)\n    ) {\n      // Yes; this is a regular table; omit if RBAC permissions tell us to.\n      if (\n        (permission === READ ||\n          permission === FILTER ||\n          permission === ORDER) &&\n        !attributeEntity.aclSelectable\n      ) {\n        return true;\n      } else if (permission === CREATE && !attributeEntity.aclInsertable) {\n        return true;\n      } else if (permission === UPDATE && !attributeEntity.aclUpdatable) {\n        return true;\n      }\n    } else {\n      // No permissions on the table at all, so normal connections will skip\n      // over it. Thus we must be being exposed via a security definer function\n      // or similar, so we should expose all fields except those that are\n      // explicitly @omit-ed.\n    }\n  }\n  return omit(entity, permission);\n};\n\nconst omitUnindexed = omit => (\n  entity: PgProc | PgClass | PgAttribute | PgConstraint,\n  permission: string\n) => {\n  if (\n    entity.kind === \"attribute\" &&\n    !entity.isIndexed &&\n    (permission === \"filter\" || permission === \"order\")\n  ) {\n    return true;\n  }\n  if (\n    entity.kind === \"constraint\" &&\n    entity.type === \"f\" &&\n    !entity.isIndexed &&\n    permission === \"read\"\n  ) {\n    let klass = entity.class;\n    if (klass) {\n      if (!entity._omitUnindexedReadWarningGiven) {\n        // $FlowFixMe\n        entity._omitUnindexedReadWarningGiven = true;\n        // eslint-disable-next-line no-console\n        console.log(\n          \"%s\",\n          `Disabled 'read' permission for ${describePgEntity(\n            entity\n          )} because it isn't indexed. For more information see https://graphile.org/postgraphile/best-practices/ To fix, perform\\n\\n  CREATE INDEX ON ${`\"${\n            klass.namespaceName\n          }\".\"${klass.name}\"`}(\"${entity.keyAttributes\n            .map(a => a.name)\n            .join('\", \"')}\");`\n        );\n      }\n    }\n    return true;\n  }\n  return omit(entity, permission);\n};\n\nfunction describePgEntity(entity: PgEntity, includeAlias = true) {\n  const getAlias = !includeAlias\n    ? () => \"\"\n    : () => {\n        const tags = pickBy(\n          entity.tags,\n          (value, key) => key === \"name\" || key.endsWith(\"Name\")\n        );\n        if (Object.keys(tags).length) {\n          return ` (with smart comments: ${chalk.bold(\n            Object.keys(tags)\n              .map(t => `@${t} ${tags[t]}`)\n              .join(\" | \")\n          )})`;\n        }\n        return \"\";\n      };\n\n  try {\n    if (entity.kind === \"constraint\") {\n      return `constraint ${chalk.bold(\n        `\"${entity.name}\"`\n      )} on ${describePgEntity(entity.class, false)}${getAlias()}`;\n    } else if (entity.kind === \"class\") {\n      // see pg_class.relkind https://www.postgresql.org/docs/10/static/catalog-pg-class.html\n      const kind =\n        {\n          c: \"composite type\",\n          f: \"foreign table\",\n          p: \"partitioned table\",\n          r: \"table\",\n          v: \"view\",\n          m: \"materialized view\",\n        }[entity.classKind] || \"table-like\";\n      return `${kind} ${chalk.bold(\n        `\"${entity.namespaceName}\".\"${entity.name}\"`\n      )}${getAlias()}`;\n    } else if (entity.kind === \"procedure\") {\n      return `function ${chalk.bold(\n        `\"${entity.namespaceName}\".\"${entity.name}\"(...args...)`\n      )}${getAlias()}`;\n    } else if (entity.kind === \"attribute\") {\n      return `column ${chalk.bold(`\"${entity.name}\"`)} on ${describePgEntity(\n        entity.class,\n        false\n      )}${getAlias()}`;\n    }\n  } catch (e) {\n    // eslint-disable-next-line no-console\n    console.error(\"Error occurred while attempting to debug entity:\", entity);\n    // eslint-disable-next-line no-console\n    console.error(e);\n  }\n  return `entity of kind '${entity.kind}' with ${\n    typeof entity.id === \"string\" ? `oid '${entity.id}'` : \"\"\n  }`;\n}\n\nfunction sqlCommentByAddingTags(entity, tagsToAdd) {\n  // NOTE: this function is NOT intended to be SQL safe; it's for\n  // displaying in error messages. Nonetheless if you find issues with\n  // SQL compatibility, please send a PR or issue.\n\n  // Ref: https://www.postgresql.org/docs/current/static/sql-syntax-lexical.html#SQL-BACKSLASH-TABLE\n  const escape = str =>\n    str.replace(\n      /['\\\\\\b\\f\\n\\r\\t]/g,\n      chr =>\n        ({\n          \"\\b\": \"\\\\b\",\n          \"\\f\": \"\\\\f\",\n          \"\\n\": \"\\\\n\",\n          \"\\r\": \"\\\\r\",\n          \"\\t\": \"\\\\t\",\n        }[chr] || \"\\\\\" + chr)\n    );\n\n  // tagsToAdd is here twice to ensure that the keys in tagsToAdd come first, but that they also \"win\" any conflicts.\n  const tags = Object.assign({}, tagsToAdd, entity.tags, tagsToAdd);\n\n  const description = entity.description;\n  const tagsSql = Object.keys(tags)\n    .reduce((memo, tag) => {\n      const tagValue = tags[tag];\n      const valueArray = Array.isArray(tagValue) ? tagValue : [tagValue];\n      const highlightOrNot = tag in tagsToAdd ? chalk.bold.green : identity;\n      valueArray.forEach(value => {\n        memo.push(\n          highlightOrNot(\n            `@${escape(escape(tag))}${\n              value === true ? \"\" : \" \" + escape(escape(value))\n            }`\n          )\n        );\n      });\n      return memo;\n    }, [])\n    .join(\"\\\\n\");\n  const commentValue = `E'${tagsSql}${\n    description ? \"\\\\n\" + escape(description) : \"\"\n  }'`;\n  let sqlThing;\n  if (entity.kind === \"class\") {\n    const identifier = `\"${entity.namespaceName}\".\"${entity.name}\"`;\n    if (entity.classKind === \"r\") {\n      sqlThing = `TABLE ${identifier}`;\n    } else if (entity.classKind === \"v\") {\n      sqlThing = `VIEW ${identifier}`;\n    } else if (entity.classKind === \"m\") {\n      sqlThing = `MATERIALIZED VIEW ${identifier}`;\n    } else {\n      sqlThing = `PLEASE_SEND_A_PULL_REQUEST_TO_FIX_THIS ${identifier}`;\n    }\n  } else if (entity.kind === \"attribute\") {\n    sqlThing = `COLUMN \"${entity.class.namespaceName}\".\"${\n      entity.class.name\n    }\".\"${entity.name}\"`;\n  } else if (entity.kind === \"procedure\") {\n    sqlThing = `FUNCTION \"${entity.namespaceName}\".\"${\n      entity.name\n    }\"(...arg types go here...)`;\n  } else if (entity.kind === \"constraint\") {\n    // TODO: TEST!\n    sqlThing = `CONSTRAINT \"${entity.name}\" ON \"${\n      entity.class.namespaceName\n    }\".\"${entity.class.name}\"`;\n  } else {\n    sqlThing = `UNKNOWN_ENTITY_PLEASE_SEND_A_PULL_REQUEST`;\n  }\n\n  return `COMMENT ON ${sqlThing} IS ${commentValue};`;\n}\n\nexport default (function PgBasicsPlugin(\n  builder,\n  {\n    pgStrictFunctions = false,\n    pgColumnFilter = defaultPgColumnFilter,\n    pgIgnoreRBAC = false,\n    pgIgnoreIndexes = true, // TODO:v5: change this to false\n    pgLegacyJsonUuid = false, // TODO:v5: remove this\n  }\n) {\n  let pgOmit = baseOmit;\n  if (!pgIgnoreRBAC) {\n    pgOmit = omitWithRBACChecks(pgOmit);\n  }\n  if (!pgIgnoreIndexes) {\n    pgOmit = omitUnindexed(pgOmit);\n  }\n  builder.hook(\"build\", build => {\n    build.versions[\"graphile-build-pg\"] = version;\n    return build.extend(build, {\n      graphileBuildPgVersion: version,\n      pgSql: sql,\n      pgStrictFunctions,\n      pgColumnFilter,\n\n      // TODO:v5: remove this workaround\n      // BEWARE: this may be overridden in PgIntrospectionPlugin for PG < 9.5\n      pgQueryFromResolveData: queryFromResolveDataFactory(),\n\n      pgAddStartEndCursor: addStartEndCursor,\n      pgOmit,\n      pgMakeProcField: makeProcField,\n      pgParseIdentifier: parseIdentifier,\n      pgViaTemporaryTable: viaTemporaryTable,\n      describePgEntity,\n      pgField,\n      sqlCommentByAddingTags,\n    });\n  });\n\n  builder.hook(\"inflection\", (inflection, build) => {\n    // TODO:v5: move this to postgraphile-core\n    const oldBuiltin = inflection.builtin;\n    inflection.builtin = function(name) {\n      if (pgLegacyJsonUuid && name === \"JSON\") return \"Json\";\n      if (pgLegacyJsonUuid && name === \"UUID\") return \"Uuid\";\n      return oldBuiltin.call(this, name);\n    };\n\n    return build.extend(\n      inflection,\n      preventEmptyResult({\n        // These helpers are passed GraphQL type names as strings\n        conditionType(typeName: string) {\n          return this.upperCamelCase(`${typeName}-condition`);\n        },\n        inputType(typeName: string) {\n          return this.upperCamelCase(`${typeName}-input`);\n        },\n        rangeBoundType(typeName: string) {\n          return this.upperCamelCase(`${typeName}-range-bound`);\n        },\n        rangeType(typeName: string) {\n          return this.upperCamelCase(`${typeName}-range`);\n        },\n        patchType(typeName: string) {\n          return this.upperCamelCase(`${typeName}-patch`);\n        },\n        baseInputType(typeName: string) {\n          return this.upperCamelCase(`${typeName}-base-input`);\n        },\n        patchField(itemName: string) {\n          return this.camelCase(`${itemName}-patch`);\n        },\n        orderByType(typeName: string) {\n          return this.upperCamelCase(`${this.pluralize(typeName)}-order-by`);\n        },\n        edge(typeName: string) {\n          return this.upperCamelCase(`${this.pluralize(typeName)}-edge`);\n        },\n        connection(typeName: string) {\n          return this.upperCamelCase(`${this.pluralize(typeName)}-connection`);\n        },\n\n        // These helpers handle overrides via smart comments. They should only\n        // be used in other inflectors, hence the underscore prefix.\n        //\n        // IMPORTANT: do NOT do case transforms here, because detail can be\n        // lost, e.g.\n        // `constantCase(camelCase('foo_1')) !== constantCase('foo_1')`\n        _functionName(proc: PgProc) {\n          return proc.tags.name || proc.name;\n        },\n        _typeName(type: PgType) {\n          // 'type' introspection result\n          return type.tags.name || type.name;\n        },\n        _tableName(table: PgClass) {\n          return table.tags.name || table.type.tags.name || table.name;\n        },\n        _singularizedTableName(table: PgClass): string {\n          return this.singularize(this._tableName(table)).replace(\n            /.(?:(?:[_-]i|I)nput|(?:[_-]p|P)atch)$/,\n            \"$&_record\"\n          );\n        },\n        _columnName(attr: PgAttribute, _options?: { skipRowId?: boolean }) {\n          return attr.tags.name || attr.name;\n        },\n\n        // From here down, functions are passed database introspection results\n        enumType(type: PgType) {\n          return this.upperCamelCase(this._typeName(type));\n        },\n        argument(name: ?string, index: number) {\n          return this.camelCase(name || `arg${index}`);\n        },\n        orderByEnum(columnName, ascending) {\n          return this.constantCase(\n            `${columnName}_${ascending ? \"asc\" : \"desc\"}`\n          );\n        },\n        orderByColumnEnum(attr: PgAttribute, ascending: boolean) {\n          const columnName = this._columnName(attr, {\n            skipRowId: true, // Because we messed up ðŸ˜”\n          });\n          return this.orderByEnum(columnName, ascending);\n        },\n        orderByComputedColumnEnum(\n          pseudoColumnName: string,\n          proc: PgProc,\n          table: PgClass,\n          ascending: boolean\n        ) {\n          const columnName = this.computedColumn(pseudoColumnName, proc, table);\n          return this.orderByEnum(columnName, ascending);\n        },\n        domainType(type: PgType) {\n          return this.upperCamelCase(this._typeName(type));\n        },\n        enumName(inValue: string) {\n          let value = inValue;\n\n          if (value === \"\") {\n            return \"_EMPTY_\";\n          }\n\n          // Some enums use asterisks to signify wildcards - this might be for\n          // the whole item, or prefixes/suffixes, or even in the middle.  This\n          // is provided on a best efforts basis, if it doesn't suit your\n          // purposes then please pass a custom inflector as mentioned below.\n          value = value\n            .replace(/\\*/g, \"_ASTERISK_\")\n            .replace(/^(_?)_+ASTERISK/, \"$1ASTERISK\")\n            .replace(/ASTERISK_(_?)_*$/, \"ASTERISK$1\");\n\n          // This is a best efforts replacement for common symbols that you\n          // might find in enums. Generally we only support enums that are\n          // alphanumeric, if these replacements don't work for you, you should\n          // pass a custom inflector that replaces this `enumName` method\n          // with one of your own chosing.\n          value =\n            {\n              // SQL comparison operators\n              \">\": \"GREATER_THAN\",\n              \">=\": \"GREATER_THAN_OR_EQUAL\",\n              \"=\": \"EQUAL\",\n              \"!=\": \"NOT_EQUAL\",\n              \"<>\": \"DIFFERENT\",\n              \"<=\": \"LESS_THAN_OR_EQUAL\",\n              \"<\": \"LESS_THAN\",\n\n              // PostgreSQL LIKE shortcuts\n              \"~~\": \"LIKE\",\n              \"~~*\": \"ILIKE\",\n              \"!~~\": \"NOT_LIKE\",\n              \"!~~*\": \"NOT_ILIKE\",\n\n              // '~' doesn't necessarily represent regexps, but the three\n              // operators following it likely do, so we'll use the word TILDE\n              // in all for consistency.\n              \"~\": \"TILDE\",\n              \"~*\": \"TILDE_ASTERISK\",\n              \"!~\": \"NOT_TILDE\",\n              \"!~*\": \"NOT_TILDE_ASTERISK\",\n\n              // A number of other symbols where we're not sure of their\n              // meaning.  We give them common generic names so that they're\n              // suitable for multiple purposes, e.g. favouring 'PLUS' over\n              // 'ADDITION' and 'DOT' over 'FULL_STOP'\n              \"%\": \"PERCENT\",\n              \"+\": \"PLUS\",\n              \"-\": \"MINUS\",\n              \"/\": \"SLASH\",\n              \"\\\\\": \"BACKSLASH\",\n              _: \"UNDERSCORE\",\n              \"#\": \"POUND\",\n              \"Â£\": \"STERLING\",\n              $: \"DOLLAR\",\n              \"&\": \"AMPERSAND\",\n              \"@\": \"AT\",\n              \"'\": \"APOSTROPHE\",\n              '\"': \"QUOTE\",\n              \"`\": \"BACKTICK\",\n              \":\": \"COLON\",\n              \";\": \"SEMICOLON\",\n              \"!\": \"EXCLAMATION_POINT\",\n              \"?\": \"QUESTION_MARK\",\n              \",\": \"COMMA\",\n              \".\": \"DOT\",\n              \"^\": \"CARET\",\n              \"|\": \"BAR\",\n              \"[\": \"OPEN_BRACKET\",\n              \"]\": \"CLOSE_BRACKET\",\n              \"(\": \"OPEN_PARENTHESIS\",\n              \")\": \"CLOSE_PARENTHESIS\",\n              \"{\": \"OPEN_BRACE\",\n              \"}\": \"CLOSE_BRACE\",\n            }[value] || value;\n          return value;\n        },\n\n        tableNode(table: PgClass) {\n          return this.camelCase(this._singularizedTableName(table));\n        },\n        tableFieldName(table: PgClass) {\n          return this.camelCase(this._singularizedTableName(table));\n        },\n        allRows(table: PgClass) {\n          return this.camelCase(\n            `all-${this.pluralize(this._singularizedTableName(table))}`\n          );\n        },\n        allRowsSimple(table: PgClass) {\n          return this.camelCase(\n            `all-${this.pluralize(this._singularizedTableName(table))}-list`\n          );\n        },\n        functionMutationName(proc: PgProc) {\n          return this.camelCase(this._functionName(proc));\n        },\n        functionMutationResultFieldName(\n          proc: PgProc,\n          gqlType,\n          plural: boolean = false,\n          outputArgNames: Array<string> = []\n        ) {\n          if (proc.tags.resultFieldName) {\n            return proc.tags.resultFieldName;\n          }\n          let name;\n          if (outputArgNames.length === 1 && outputArgNames[0] !== \"\") {\n            name = this.camelCase(outputArgNames[0]);\n          } else if (gqlType.name === \"Int\") {\n            name = \"integer\";\n          } else if (gqlType.name === \"Float\") {\n            name = \"float\";\n          } else if (gqlType.name === \"Boolean\") {\n            name = \"boolean\";\n          } else if (gqlType.name === \"String\") {\n            name = \"string\";\n          } else if (proc.returnTypeId === \"2249\") {\n            // returns a record type\n            name = \"result\";\n          } else {\n            name = this.camelCase(gqlType.name);\n          }\n          return plural ? this.pluralize(name) : name;\n        },\n        functionQueryName(proc: PgProc) {\n          return this.camelCase(this._functionName(proc));\n        },\n        functionQueryNameList(proc: PgProc) {\n          return this.camelCase(`${this._functionName(proc)}-list`);\n        },\n        functionPayloadType(proc: PgProc) {\n          return this.upperCamelCase(`${this._functionName(proc)}-payload`);\n        },\n        functionInputType(proc: PgProc) {\n          return this.upperCamelCase(`${this._functionName(proc)}-input`);\n        },\n        functionOutputFieldName(\n          proc: PgProc,\n          outputArgName: string,\n          index: number\n        ) {\n          return this.argument(outputArgName, index);\n        },\n        tableType(table: PgClass) {\n          return this.upperCamelCase(this._singularizedTableName(table));\n        },\n        column(attr: PgAttribute) {\n          return this.camelCase(this._columnName(attr));\n        },\n        computedColumn(\n          pseudoColumnName: string,\n          proc: PgProc,\n          _table: PgClass\n        ) {\n          return proc.tags.fieldName || this.camelCase(pseudoColumnName);\n        },\n        computedColumnList(\n          pseudoColumnName: string,\n          proc: PgProc,\n          _table: PgClass\n        ) {\n          return proc.tags.fieldName\n            ? proc.tags.fieldName + \"List\"\n            : this.camelCase(`${pseudoColumnName}-list`);\n        },\n        singleRelationByKeys(\n          detailedKeys: Keys,\n          table: PgClass,\n          _foreignTable: PgClass,\n          constraint: PgConstraint\n        ) {\n          if (constraint.tags.fieldName) {\n            return constraint.tags.fieldName;\n          }\n          return this.camelCase(\n            `${this._singularizedTableName(table)}-by-${detailedKeys\n              .map(key => this.column(key))\n              .join(\"-and-\")}`\n          );\n        },\n        singleRelationByKeysBackwards(\n          detailedKeys: Keys,\n          table: PgClass,\n          _foreignTable: PgClass,\n          constraint: PgConstraint\n        ) {\n          if (constraint.tags.foreignSingleFieldName) {\n            return constraint.tags.foreignSingleFieldName;\n          }\n          if (constraint.tags.foreignFieldName) {\n            return constraint.tags.foreignFieldName;\n          }\n          return this.singleRelationByKeys(\n            detailedKeys,\n            table,\n            _foreignTable,\n            constraint\n          );\n        },\n        manyRelationByKeys(\n          detailedKeys: Keys,\n          table: PgClass,\n          _foreignTable: PgClass,\n          constraint: PgConstraint\n        ) {\n          if (constraint.tags.foreignFieldName) {\n            return constraint.tags.foreignFieldName;\n          }\n          return this.camelCase(\n            `${this.pluralize(\n              this._singularizedTableName(table)\n            )}-by-${detailedKeys.map(key => this.column(key)).join(\"-and-\")}`\n          );\n        },\n        manyRelationByKeysSimple(\n          detailedKeys: Keys,\n          table: PgClass,\n          _foreignTable: PgClass,\n          constraint: PgConstraint\n        ) {\n          if (constraint.tags.foreignSimpleFieldName) {\n            return constraint.tags.foreignSimpleFieldName;\n          }\n          if (constraint.tags.foreignFieldName) {\n            return constraint.tags.foreignFieldName;\n          }\n          return this.camelCase(\n            `${this.pluralize(\n              this._singularizedTableName(table)\n            )}-by-${detailedKeys\n              .map(key => this.column(key))\n              .join(\"-and-\")}-list`\n          );\n        },\n        rowByUniqueKeys(\n          detailedKeys: Keys,\n          table: PgClass,\n          constraint: PgConstraint\n        ) {\n          if (constraint.tags.fieldName) {\n            return constraint.tags.fieldName;\n          }\n          return this.camelCase(\n            `${this._singularizedTableName(table)}-by-${detailedKeys\n              .map(key => this.column(key))\n              .join(\"-and-\")}`\n          );\n        },\n        updateByKeys(\n          detailedKeys: Keys,\n          table: PgClass,\n          constraint: PgConstraint\n        ) {\n          if (constraint.tags.updateFieldName) {\n            return constraint.tags.updateFieldName;\n          }\n          return this.camelCase(\n            `update-${this._singularizedTableName(table)}-by-${detailedKeys\n              .map(key => this.column(key))\n              .join(\"-and-\")}`\n          );\n        },\n        deleteByKeys(\n          detailedKeys: Keys,\n          table: PgClass,\n          constraint: PgConstraint\n        ) {\n          if (constraint.tags.deleteFieldName) {\n            return constraint.tags.deleteFieldName;\n          }\n          return this.camelCase(\n            `delete-${this._singularizedTableName(table)}-by-${detailedKeys\n              .map(key => this.column(key))\n              .join(\"-and-\")}`\n          );\n        },\n        updateByKeysInputType(\n          detailedKeys: Keys,\n          table: PgClass,\n          constraint: PgConstraint\n        ) {\n          if (constraint.tags.updateFieldName) {\n            return this.upperCamelCase(\n              `${constraint.tags.updateFieldName}-input`\n            );\n          }\n          return this.upperCamelCase(\n            `update-${this._singularizedTableName(table)}-by-${detailedKeys\n              .map(key => this.column(key))\n              .join(\"-and-\")}-input`\n          );\n        },\n        deleteByKeysInputType(\n          detailedKeys: Keys,\n          table: PgClass,\n          constraint: PgConstraint\n        ) {\n          if (constraint.tags.deleteFieldName) {\n            return this.upperCamelCase(\n              `${constraint.tags.deleteFieldName}-input`\n            );\n          }\n          return this.upperCamelCase(\n            `delete-${this._singularizedTableName(table)}-by-${detailedKeys\n              .map(key => this.column(key))\n              .join(\"-and-\")}-input`\n          );\n        },\n        updateNode(table: PgClass) {\n          return this.camelCase(`update-${this._singularizedTableName(table)}`);\n        },\n        deleteNode(table: PgClass) {\n          return this.camelCase(`delete-${this._singularizedTableName(table)}`);\n        },\n        deletedNodeId(table: PgClass) {\n          return this.camelCase(`deleted-${this.singularize(table.name)}-id`);\n        },\n        updateNodeInputType(table: PgClass) {\n          return this.upperCamelCase(\n            `update-${this._singularizedTableName(table)}-input`\n          );\n        },\n        deleteNodeInputType(table: PgClass) {\n          return this.upperCamelCase(\n            `delete-${this._singularizedTableName(table)}-input`\n          );\n        },\n        edgeField(table: PgClass) {\n          return this.camelCase(`${this._singularizedTableName(table)}-edge`);\n        },\n        recordFunctionReturnType(proc: PgProc) {\n          return (\n            proc.tags.resultTypeName ||\n            this.upperCamelCase(`${this._functionName(proc)}-record`)\n          );\n        },\n        recordFunctionConnection(proc: PgProc) {\n          return this.upperCamelCase(`${this._functionName(proc)}-connection`);\n        },\n        recordFunctionEdge(proc: PgProc) {\n          return this.upperCamelCase(\n            `${this.singularize(this._functionName(proc))}-edge`\n          );\n        },\n        scalarFunctionConnection(proc: PgProc) {\n          return this.upperCamelCase(`${this._functionName(proc)}-connection`);\n        },\n        scalarFunctionEdge(proc: PgProc) {\n          return this.upperCamelCase(\n            `${this.singularize(this._functionName(proc))}-edge`\n          );\n        },\n        createField(table: PgClass) {\n          return this.camelCase(`create-${this._singularizedTableName(table)}`);\n        },\n        createInputType(table: PgClass) {\n          return this.upperCamelCase(\n            `create-${this._singularizedTableName(table)}-input`\n          );\n        },\n        createPayloadType(table: PgClass) {\n          return this.upperCamelCase(\n            `create-${this._singularizedTableName(table)}-payload`\n          );\n        },\n        updatePayloadType(table: PgClass) {\n          return this.upperCamelCase(\n            `update-${this._singularizedTableName(table)}-payload`\n          );\n        },\n        deletePayloadType(table: PgClass) {\n          return this.upperCamelCase(\n            `delete-${this._singularizedTableName(table)}-payload`\n          );\n        },\n      }),\n      \"Default inflectors from PgBasicsPlugin. You can override these with `makeAddInflectorsPlugin(..., true)`.\"\n    );\n  });\n}: Plugin);\n"]}