{"version":3,"sources":["../../src/plugins/PageInfoStartEndCursor.js"],"names":["PageInfoStartEndCursor","builder","hook","fields","build","context","extend","getTypeByName","inflection","Self","fieldWithHooks","name","builtin","Cursor","startCursor","addDataGenerator","usesCursor","description","type","isPageInfoStartCursorField","endCursor"],"mappings":";;;;;;kBAGgB,SAASA,sBAAT,CAAgCC,OAAhC,EAAyC;AACvDA,UAAQC,IAAR,CAAa,0BAAb,EAAyC,CAACC,MAAD,EAASC,KAAT,EAAgBC,OAAhB,KAA4B;AACnE,UAAM,EAAEC,MAAF,EAAUC,aAAV,EAAyBC,UAAzB,KAAwCJ,KAA9C;AACA,UAAM,EAAEK,IAAF,EAAQC,cAAR,KAA2BL,OAAjC;AACA,QAAII,KAAKE,IAAL,KAAcH,WAAWI,OAAX,CAAmB,UAAnB,CAAlB,EAAkD;AAChD,aAAOT,MAAP;AACD;AACD,UAAMU,SAASN,cAAc,QAAd,CAAf;AACA,WAAOD,OACLH,MADK,EAEL;AACEW,mBAAaJ,eACX,aADW,EAEX,CAAC,EAAEK,gBAAF,EAAD,KAA0B;AACxBA,yBAAiB,OAAO,EAAEC,YAAY,CAAC,IAAD,CAAd,EAAP,CAAjB;AACA,eAAO;AACLC,uBAAa,oDADR;AAELC,gBAAML;AAFD,SAAP;AAID,OARU,EASX;AACEM,oCAA4B;AAD9B,OATW,CADf;AAcEC,iBAAWV,eACT,WADS,EAET,CAAC,EAAEK,gBAAF,EAAD,KAA0B;AACxBA,yBAAiB,OAAO,EAAEC,YAAY,CAAC,IAAD,CAAd,EAAP,CAAjB;AACA,eAAO;AACLC,uBAAa,mDADR;AAELC,gBAAML;AAFD,SAAP;AAID,OARQ,EAST;AACEM,oCAA4B;AAD9B,OATS;AAdb,KAFK,EA8BJ,mCAAkCV,KAAKE,IAAK,EA9BxC,CAAP;AAgCD,GAvCD;AAwCD,C","file":"PageInfoStartEndCursor.js","sourcesContent":["// @flow\nimport type { Plugin } from \"graphile-build\";\n\nexport default (function PageInfoStartEndCursor(builder) {\n  builder.hook(\"GraphQLObjectType:fields\", (fields, build, context) => {\n    const { extend, getTypeByName, inflection } = build;\n    const { Self, fieldWithHooks } = context;\n    if (Self.name !== inflection.builtin(\"PageInfo\")) {\n      return fields;\n    }\n    const Cursor = getTypeByName(\"Cursor\");\n    return extend(\n      fields,\n      {\n        startCursor: fieldWithHooks(\n          \"startCursor\",\n          ({ addDataGenerator }) => {\n            addDataGenerator(() => ({ usesCursor: [true] }));\n            return {\n              description: \"When paginating backwards, the cursor to continue.\",\n              type: Cursor,\n            };\n          },\n          {\n            isPageInfoStartCursorField: true,\n          }\n        ),\n        endCursor: fieldWithHooks(\n          \"endCursor\",\n          ({ addDataGenerator }) => {\n            addDataGenerator(() => ({ usesCursor: [true] }));\n            return {\n              description: \"When paginating forwards, the cursor to continue.\",\n              type: Cursor,\n            };\n          },\n          {\n            isPageInfoStartCursorField: true,\n          }\n        ),\n      },\n      `Adding startCursor/endCursor to ${Self.name}`\n    );\n  });\n}: Plugin);\n"]}